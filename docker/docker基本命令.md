
### dockerä»‹ç»
Dockerå°†åº”ç”¨ç¨‹åºä¸è¯¥ç¨‹åºçš„ä¾èµ–ï¼Œæ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ã€‚

image æ–‡ä»¶ç”Ÿæˆçš„å®¹å™¨å®ä¾‹ï¼Œæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç§°ä¸ºå®¹å™¨æ–‡ä»¶ã€‚
ä¸€æ—¦å®¹å™¨ç”Ÿæˆï¼Œå°±ä¼šåŒæ—¶å­˜åœ¨ä¸¤ä¸ªæ–‡ä»¶ï¼š image æ–‡ä»¶å’Œå®¹å™¨æ–‡ä»¶ã€‚
è€Œä¸”å…³é—­å®¹å™¨å¹¶ä¸ä¼šåˆ é™¤å®¹å™¨æ–‡ä»¶ï¼Œåªæ˜¯å®¹å™¨åœæ­¢è¿è¡Œè€Œå·²ã€‚

### dockeræ“ä½œå‘½ä»¤

åˆ—å‡ºæ‰€æœ‰imageæ–‡ä»¶
```
docker images
```

ä¸‹è½½é•œåƒï¼š `docker image pull [image name]`

æ„å»ºé•œåƒï¼š `docker image build -t [username]/[repository]:[tag]`

å‘å¸ƒé•œåƒï¼š`docker image push [username]/[repository]:[tag]`

ç»™é•œåƒæ‰“æ ‡ç­¾, ä½¿ç”¨`tag`å‘½ä»¤æ·»åŠ é•œåƒæ ‡ç­¾ï¼ŒæŒ‡å‘åŒä¸€é•œåƒæ–‡ä»¶ï¼š`docker tag ubuntu:lastest myubuntu:lastest`

è¿è¡ŒåŠè¿›å…¥å®¹å™¨ï¼šè§ğŸ‘‡ã€docker runå’Œdocker execä½¿ç”¨ã€‘

æŸ¥çœ‹dockerä¸­æ‰€æœ‰çš„å®¹å™¨ï¼š`docker ps -a`

æ€æ­»æŸä¸ªå®¹å™¨ï¼šè§ğŸ‘‡ã€åˆ é™¤å®¹å™¨çš„æ–¹æ³•æ±‡æ€»ã€‘

æš‚åœæŸä¸ªå®¹å™¨ï¼š`docker container stop [containID]`

æŸ¥çœ‹æŸä¸ªå®¹å™¨æ—¥å¿—ï¼š`docker logs`

### docker runå’Œdocker execä½¿ç”¨
è¿è¡Œé•œåƒï¼Œä½¿ç”¨`docker run`
`docker run -it -p 8000:8000 -v /src/webapp(æœ¬åœ°ç»å¯¹):/opt/webapp(é•œåƒç»å¯¹è·¯å¾„)  ubuntu `

`-i` æ‰“å¼€æ ‡å‡†è¾“å…¥æ¥å—ç”¨æˆ·çš„è¾“å…¥

`-t` è®©dockeråˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯(pseudo-tty)ï¼Œå¹¶ç»‘å®šåˆ°å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¸Š

`-u` æ‰§è¡Œå‘½ä»¤çš„ç”¨æˆ·

```sh
docker run -p å®¹å™¨ç«¯å£:å®¿ä¸»ç«¯å£
    -v å®¿ä¸»ç›®å½•:å®¹å™¨ç›®å½•
    -d åå°è¿è¡Œ
    -e è®¾ç½®ç¯å¢ƒå˜é‡
    -name å®¹å™¨åç§°
    --rm å®¹å™¨ç»ˆæ­¢ä¹‹åï¼Œè‡ªåŠ¨åˆ é™¤æ–‡ä»¶
```

è¿›å…¥å®¹å™¨ï¼ŒæŸ¥çœ‹çŠ¶æ€ï¼Œå…¶ä¸­`i`,`t`å‚æ•°è¯´æ˜å’Œ`docker run`ä¸€è‡´
```
docker exec -it [container_name/container_id] /bin/bash
```

### åˆ é™¤å®¹å™¨çš„æ–¹æ³•æ±‡æ€»
- æ–¹æ³•ä¸€ï¼š
```sh
#æ˜¾ç¤ºæ‰€æœ‰çš„å®¹å™¨ï¼Œè¿‡æ»¤å‡ºExitedçŠ¶æ€çš„å®¹å™¨ï¼Œå–å‡ºè¿™äº›å®¹å™¨çš„IDï¼Œ
sudo docker ps -a|grep Exited|awk '{print $1}'
#æŸ¥è¯¢æ‰€æœ‰çš„å®¹å™¨ï¼Œè¿‡æ»¤å‡ºExitedçŠ¶æ€çš„å®¹å™¨ï¼Œåˆ—å‡ºå®¹å™¨IDï¼Œåˆ é™¤è¿™äº›å®¹å™¨
sudo docker rm `docker ps -a|grep Exited|awk '{print $1}'`
```

- æ–¹æ³•äºŒï¼š
```sh
#åˆ é™¤æ‰€æœ‰æœªè¿è¡Œçš„å®¹å™¨ï¼ˆå·²ç»è¿è¡Œçš„åˆ é™¤ä¸äº†ï¼Œæœªè¿è¡Œçš„å°±ä¸€èµ·è¢«åˆ é™¤äº†ï¼‰
sudo docker rm $(docker ps -a -q)
```

- æ–¹æ³•ä¸‰ï¼š
```sh
#æ ¹æ®å®¹å™¨çš„çŠ¶æ€ï¼Œåˆ é™¤ExitedçŠ¶æ€çš„å®¹å™¨
sudo docker rm $(sudo docker ps -qf status=exited)
```

- æ–¹æ³•å››ï¼š
```sh
# åˆ é™¤å¤„äºstopçš„å®¹å™¨æˆ–è€…çŠ¶æ€status=Exitedçš„å®¹å™¨
sudo docker container prune
```
ç»ˆæ­¢è¿è¡Œçš„å®¹å™¨æ–‡ä»¶ï¼Œä¾ç„¶ä¼šå æ®ç¡¬ç›˜ç©ºé—´ï¼Œå¯ä»¥ä½¿ç”¨`docker rm [containerID]`å‘½ä»¤åˆ é™¤ã€‚

### docker å¦‚ä½•åˆ é™¤noneé•œåƒ
åˆ é™¤noneçš„é•œåƒï¼Œè¦å…ˆåˆ é™¤é•œåƒä¸­çš„å®¹å™¨ã€‚è¦åˆ é™¤é•œåƒä¸­çš„å®¹å™¨ï¼Œå¿…é¡»å…ˆåœæ­¢å®¹å™¨ã€‚
```sh
# åœæ­¢å®¹å™¨
docker stop $(docker ps -a | grep "Exited" | awk '{print $1 }')
# åˆ é™¤å®¹å™¨
docker rm $(docker ps -a | grep "Exited" | awk '{print $1 }')
# åˆ é™¤é•œåƒ
docker rmi $(docker images | grep "none" | awk '{print $3}')
```

### åˆ›å»ºé•œåƒçš„ä¸‰ç§æ–¹æ³•

#### åŸºäºå·²æœ‰çš„é•œåƒåˆ›å»º
åŸºäºè¿è¡Œçš„å®¹å™¨æ¥åˆ›å»º

#### åŸºäº Dockerfile æ¥åˆ›å»º
åˆ›å»º`Dockerfile`æ¥åˆ›å»º

#### åŸºäºæœ¬åœ°æ¨¡æ¿æ¥å¯¼å…¥
ä½¿ç”¨å¯¼å‡ºååŠ è½½çš„æ–¹å¼åˆ›å»º,ä¸»è¦æ˜¯ç”¨`docker save`å’Œ`docker load`
